<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <title>Breast Cancer Prediction</title>
</head>

<body>


    <div class="container">
        <h1 style="text-align: center;">Breast Cancer Prediction Model</h1>
        <img style="width: 100%;" height="150px" src="{{ url_for('static', filename='image.png') }}" alt="">

        <form id="predict-form">
            <div class="form-group">
                <label for="features-input">Input all medical features for Breast Cancer (comma-separated)</label>
                <input type="text" name="feature" class="form-control" id="features-input" placeholder="e.g. 5.1,3.5,1.4,0.2">
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>

        <div id="result" class="mt-4"></div>

        <script>
            (function(){
                const form = document.getElementById('predict-form');
                const input = document.getElementById('features-input');
                const result = document.getElementById('result');

                function showCard(title, imgUrl, text){
                    result.innerHTML = `\n                        <div class="card" style="width: 18rem;">\n                            <img src="${imgUrl}" class="card-img-top" alt="result image">\n                            <div class="card-body">\n                                <h5 class="card-title">${title}</h5>\n                                <p class="card-text">${text}</p>\n                            </div>\n                        </div>`;
                }

                form.addEventListener('submit', async function(e){
                    e.preventDefault();
                    result.innerText = 'Loading...';
                    const features = input.value || '';
                    try{
                        const resp = await fetch('/api/predict', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ feature: features })
                        });
                        const data = await resp.json();
                        if(!resp.ok){
                            result.innerText = data.error || 'Server error';
                            return;
                        }
                        const pred = data.prediction;
                        if(pred === 'CANCEROUS'){
                            showCard('CANCEROUS', '/static/image1.png', 'The model predicts the sample as CANCEROUS.');
                        } else if(pred === 'NON-CANCEROUS'){
                            showCard('NON - CANCEROUS', '/static/image2.png', 'The model predicts the sample as NON-CANCEROUS.');
                        } else {
                            result.innerText = JSON.stringify(data);
                        }
                    }catch(err){
                        result.innerText = 'Request failed: ' + err;
                    }
                });
            })();
        </script>





    </div>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
        integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
        crossorigin="anonymous"></script>
</body>

</html>